<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>재물보험 체크리스트</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --primary: #1a73e8;
      --primary-light: #e8f0fe;
      --border: #dde2eb;
      --bg-section: #f5f7fb;
      --tooltip-bg: #111827;
      --tooltip-text: #f9fafb;

      --ok: #16a34a;
      --ok-bg: #ecfdf5;
      --warn: #f59e0b;
      --warn-bg: #fffbeb;
      --bad: #ef4444;
      --bad-bg: #fef2f2;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f2f4f8;
      color: #111827;
    }

    .app {
      max-width: 1080px;
      margin: 0 auto;
      padding: 24px 16px 48px;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    header { margin-bottom: 24px; }

    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 600;
      color: var(--primary);
      background: var(--primary-light);
      margin-bottom: 8px;
    }

    h1 {
      font-size: 24px;
      margin: 4px 0 8px;
    }

    .subtitle {
      font-size: 14px;
      color: #4b5563;
    }

    .top-notice {
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #fecaca;
      background: #fff1f2;
      color: #b91c1c;
      font-weight: 800;
      font-size: 13px;
      line-height: 1.5;
    }

    .layout {
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 16px;
      align-items: flex-start;
      flex: 1;
    }

    @media (max-width: 900px) {
      .layout { grid-template-columns: 1fr; }
    }

    .card {
      background: #fff;
      border-radius: 12px;
      border: 1px solid var(--border);
      padding: 16px 18px;
      box-shadow: 0 2px 4px rgba(15, 23, 42, 0.04);
    }

    .card-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card-title span.dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--primary);
    }

    label { font-size: 13px; }

    select {
      width: 100%;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid var(--border);
      font-size: 13px;
    }

    .field { margin-top: 10px; }

    .field-label {
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 4px;
      color: #4b5563;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .field-disabled label,
    .field-disabled .field-label { color: #9ca3af; }

    .field-disabled select {
      background: #e5e7eb;
      color: #9ca3af;
      border-color: #d1d5db;
      cursor: not-allowed;
    }

    .section {
      margin-bottom: 12px;
      border-radius: 10px;
      background: var(--bg-section);
      border: 1px solid var(--border);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 12px;
      cursor: pointer;
    }

    .section-header-left {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .section-title {
      font-size: 13px;
      font-weight: 600;
    }

    .section-tag {
      font-size: 11px;
      color: #6b7280;
    }

    .chevron {
      font-size: 16px;
      color: #9ca3af;
    }

    .section-body {
      padding: 10px 12px 12px;
      border-top: 1px solid var(--border);
      background: #fff;
      position: relative;
    }

    /* 준비 정도 컬럼 포함: 4열 */
    .coverage-row {
      display: grid;
      grid-template-columns: 92px minmax(0, 1.6fr) minmax(0, 1.4fr) minmax(0, 0.8fr);
      gap: 8px;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px dashed #e5e7eb;
    }
    .coverage-row:last-child { border-bottom: none; }

    @media (max-width: 720px) {
      .coverage-row { grid-template-columns: 1fr; gap: 6px; }
    }

    /* 결과 확인 후: 행 전체 색칠 */
    .coverage-row.row-ok {
      background: var(--ok-bg);
      border: 1px solid #86efac;
      border-radius: 10px;
      padding: 10px 10px;
    }
    .coverage-row.row-warn {
      background: var(--warn-bg);
      border: 1px solid #fcd34d;
      border-radius: 10px;
      padding: 10px 10px;
    }
    .coverage-row.row-bad {
      background: var(--bad-bg);
      border: 1px solid #fecaca;
      border-radius: 10px;
      padding: 10px 10px;
    }

    .section-body .coverage-row { margin: 8px 0; }

    .prep-box {
      display: flex;
      flex-direction: column;
      gap: 6px;
      align-items: flex-start;
      min-height: 44px;
    }

    .prep-label {
      font-size: 11px;
      color: #6b7280;
      font-weight: 700;
      line-height: 1;
    }

    .prep-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      min-width: 64px;
      padding: 6px 8px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      font-weight: 900;
      background: #f9fafb;
      color: #374151;
      line-height: 1;
      user-select: none;
    }

    .prep-badge.ok {
      border-color: #86efac;
      background: var(--ok-bg);
      color: var(--ok);
    }
    .prep-badge.warn {
      border-color: #fcd34d;
      background: var(--warn-bg);
      color: var(--warn);
    }
    .prep-badge.bad {
      border-color: #fecaca;
      background: var(--bad-bg);
      color: var(--bad);
    }

    /* 결과 확인 전: 라벨/배지 숨김 */
    .prep-label, .prep-badge { display: none; }

    /* 결과 확인 후: 라벨/배지 표시 */
    .prep-label.show { display: block; }
    .prep-badge.show { display: inline-flex; }

    .coverage-main {
      font-size: 13px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      position: relative;
    }

    .coverage-desc {
      font-size: 11px;
      color: #6b7280;
      margin-top: 4px;
      line-height: 1.5;
    }

    .checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 12px;
    }

    .checkbox-group label {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
    }

    .switch {
      position: relative;
      width: 34px;
      height: 18px;
      display: inline-block;
      margin-right: 6px;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      inset: 0;
      background-color: #d1d5db;
      transition: 0.2s;
      border-radius: 999px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 14px;
      width: 14px;
      left: 2px;
      bottom: 2px;
      background-color: white;
      transition: 0.2s;
      border-radius: 50%;
    }
    .switch input:checked + .slider { background-color: var(--primary); }
    .switch input:checked + .slider:before { transform: translateX(16px); }

    .actions-bar-wrapper {
      margin-top: 12px;
      padding: 10px 14px;
      background: #e5e7eb;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .actions-bar-top {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      gap: 8px;
    }

    #checkResult {
      font-size: 13px;
      font-weight: 600;
      padding: 7px 10px;
      border-radius: 8px;
      border: 1px dashed #f97316;
      background: #fff7ed;
      color: #9a3412;
      display: none;
      flex: 1;
      box-sizing: border-box;
      min-width: 0;
    }

    @media (max-width: 720px) {
      .actions-bar-top { flex-direction: column; align-items: stretch; }
      #checkResult { width: 100%; }
    }

    .disclaimer-box {
      margin-top: 8px;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid #fca5a5;
      background: #fff1f2;
      font-size: 11px;
      color: #b91c1c;
      line-height: 1.5;
    }

    .disclaimer-title {
      font-size: 11px;
      font-weight: 700;
      color: #b91c1c;
      margin-bottom: 4px;
    }

    .disclaimer-box ul { margin: 0; padding-left: 16px; }
    .disclaimer-box li { margin-bottom: 2px; }

    .auto-fire-box {
      margin-top: 10px;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px dashed #cbd5f5;
      background: #f3f4ff;
      font-size: 12px;
      color: #374151;
    }

    .auto-fire-title {
      font-weight: 600;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .auto-fire-title span.badge {
      margin: 0;
      padding: 2px 8px;
      font-size: 10px;
      border-radius: 999px;
      background: #1d4ed8;
      color: #eef2ff;
    }

    .auto-fire-value {
      font-weight: 700;
      color: #1d4ed8;
      font-size: 20px;
    }

    .auto-fire-desc {
      font-size: 11px;
      color: #6b7280;
      margin-top: 2px;
    }

    .summary {
      font-size: 12px;
      color: #4b5563;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-top: 8px;
    }

    .summary-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #10b981;
    }

    .summary-tag {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      background: #f9fafb;
    }

    .salon-only-row { display: none; }
    .restaurant-only-row { display: none; }

    .tooltip-trigger {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      width: 16px;
      height: 16px;
      border-radius: 999px;
      border: 1px solid #9ca3af;
      font-size: 10px;
      color: #6b7280;
      cursor: default;
      margin-left: 4px;
      background: #fff;
    }

    .coverage-tooltip {
      position: absolute;
      z-index: 50;
      min-width: 200px;
      max-width: 260px;
      padding: 8px 10px;
      border-radius: 8px;
      background: var(--tooltip-bg);
      color: var(--tooltip-text);
      font-size: 11px;
      line-height: 1.4;
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.35);
      display: none;
    }

    .coverage-tooltip.tooltip-bottom { left: 0; top: 22px; }
    .coverage-tooltip.tooltip-bottom::before {
      content: "";
      position: absolute;
      top: -6px;
      left: 12px;
      border-width: 0 6px 6px 6px;
      border-style: solid;
      border-color: transparent transparent var(--tooltip-bg) transparent;
    }

    .coverage-tooltip.tooltip-top { left: 0; bottom: 22px; }
    .coverage-tooltip.tooltip-top::before {
      content: "";
      position: absolute;
      bottom: -6px;
      left: 12px;
      border-width: 6px 6px 0 6px;
      border-style: solid;
      border-color: var(--tooltip-bg) transparent transparent transparent;
    }

    .coverage-tooltip.visible { display: block; }

    @media (min-width: 721px) {
      .coverage-row > div:nth-child(3) { padding-left: 12px; }
      .coverage-row > div:nth-child(4) { padding-left: 8px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="badge">재물보험 체크리스트</div>
      <h1>업종별 재물보험 가입 조건 체크</h1>
      <div class="subtitle">
        업종과 기본 조건을 선택하면, 해당 업종에 맞는 담보 체크리스트와
        의무가입 화재보험 종류가 자동으로 표시됩니다.
      </div>

      <div class="top-notice">
        본 체크리스트는 (주)에이플러스에셋어드바이저의 설계사(TFA) 교육용으로 제작된 자료로, 당사 설계사의 업무 지원을 목적으로만 제공됩니다.
      </div>
    </header>

    <div class="layout">
      <aside class="card">
        <div class="card-title">
          <span class="dot"></span>
          업종 및 기본 조건
        </div>

        <div class="field">
          <div class="field-label">업종 선택</div>
          <select id="industrySelect">
            <option value="smallshop">소매점(문구점, 의류판매점 등)</option>
            <option value="salon">미용실</option>
            <option value="restaurant">음식점</option>
          </select>
        </div>

        <div class="field field-cond field-disabled" id="fieldCondLocation">
          <div class="field-label">조건1 - 위치</div>
          <select id="condLocation" disabled>
            <option value="1층">1층</option>
            <option value="지하">지하</option>
            <option value="2층 이상">2층 이상</option>
          </select>
        </div>

        <div class="field field-cond field-disabled" id="fieldCondArea">
          <div class="field-label">조건2 - 면적</div>
          <select id="condArea" disabled>
            <option value="small">20평 미만 (66m² 미만)</option>
            <option value="mid">20평 이상 30평 미만 (66m² 이상 100m² 미만)</option>
            <option value="large">30평 이상 (100m² 이상)</option>
          </select>
        </div>

        <div class="auto-fire-box" id="autoFireBox">
          <div class="auto-fire-title">
            <span>의무가입 화재보험</span>
            <span class="badge">자동 판정</span>
          </div>
          <div class="auto-fire-value" id="autoFireValue">의무가입 미대상</div>
          <div class="auto-fire-desc" id="autoFireDesc">
            조건1(위치), 조건2(면적)을 바탕으로 의무가입 대상 여부를 표시합니다.
          </div>
        </div>

        <!-- ✅ 보험료 산출 요율기준 -->
        <div class="field" id="fieldRateBasis">
          <div class="field-label">보험료 산출 요율기준</div>
          <select id="rateBasisSelect">
            <option value="" selected disabled>선택해 주세요</option>
            <option value="operating">영위업종 기준</option>
            <option value="rating">요율업종 기준</option>
          </select>

          <div class="auto-fire-box" id="rateBasisBox" style="margin-top:10px;">
            <div class="auto-fire-title">
              <span>요율기준 안내</span>
              <span class="badge">자동 안내</span>
            </div>
            <div class="auto-fire-value" id="rateBasisValue">선택 필요</div>
            <div class="auto-fire-desc" id="rateBasisDesc">
              보험료 산출에 사용된 업종 기준을 선택하면 설명과 가입 상태를 안내합니다.
            </div>
          </div>
        </div>

        <div class="summary">
          <span class="summary-tag">
            <span class="summary-dot"></span>
            자동 판정 로직
          </span>
          <span>실제 법령 및 상품 기준과는 차이가 있을 수 있습니다.</span>
        </div>
      </aside>

      <main>
        <!-- 화재 관련 -->
        <section class="section">
          <div class="section-header" onclick="toggleSection(this)">
            <div class="section-header-left">
              <div class="section-title">화재 관련 (필수 가입(기본계약))</div>
              <div class="section-tag">화재손해, 복구·수리비용 등 기본 재물 보장</div>
            </div>
            <div class="chevron">▾</div>
          </div>
          <div class="section-body">
            <div class="coverage-row" data-industry="both">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">화재손해</div>
                <div class="coverage-desc" data-title="화재손해"></div>
              </div>
              <div>
                <div class="checkbox-group">
                  <label><input type="checkbox" /> 건물</label>
                  <label><input type="checkbox" /> 시설</label>
                  <label><input type="checkbox" /> 집기</label>
                  <label><input type="checkbox" /> 동산</label>
                </div>
              </div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <div class="coverage-row" data-industry="both">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">화재 복구/수리비용</div>
                <div class="coverage-desc" data-title="화재 복구/수리비용"></div>
              </div>
              <div>
                <div class="checkbox-group">
                  <label><input type="checkbox" /> 건물</label>
                  <label><input type="checkbox" /> 시설</label>
                </div>
              </div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>
          </div>
        </section>

        <!-- 배상책임 -->
        <section class="section">
          <div class="section-header" onclick="toggleSection(this)">
            <div class="section-header-left">
              <div class="section-title">배상책임 (선택 가입(특약))</div>
              <div class="section-tag">시설, 화재 관련 대인·대물 배상책임</div>
            </div>
            <div class="chevron">▾</div>
          </div>
          <div class="section-body">
            <div class="coverage-row" data-industry="both">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">
                  시설소유(관리)자 배상책임
                  <span class="tooltip-trigger" tabindex="0">예</span>
                  <div class="coverage-tooltip tooltip-bottom" data-title="시설소유(관리)자 배상책임"></div>
                </div>
                <div class="coverage-desc" data-title="시설소유(관리)자 배상책임"></div>
              </div>
              <div>
                <div class="checkbox-group">
                  <label><input type="checkbox" /> 자기부담금 10만원</label>
                  <label><input type="checkbox" /> 자기부담금 10만원 초과</label>
                </div>
              </div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <div class="coverage-row" data-industry="both">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">
                  화재(폭발포함) 배상책임
                  <span class="tooltip-trigger" tabindex="0">예</span>
                  <div class="coverage-tooltip tooltip-bottom" data-title="화재(폭발포함) 배상책임"></div>
                </div>
                <div class="coverage-desc" data-title="화재(폭발포함) 배상책임"></div>
              </div>
              <div>
                <div class="checkbox-group">
                  <label><input type="checkbox" /> 종업원 보장 O</label>
                  <label><input type="checkbox" /> 종업원 보장 X</label>
                </div>
              </div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <div class="coverage-row salon-only-row" data-industry="salon">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">
                  이미용사 배상책임
                  <span class="tooltip-trigger" tabindex="0">예</span>
                  <div class="coverage-tooltip tooltip-bottom" data-title="이미용사 배상책임"></div>
                </div>
                <div class="coverage-desc" data-title="이미용사 배상책임"></div>
              </div>
              <div>
                <div class="checkbox-group">
                  <label><input type="checkbox" /> 자기부담금(대인/대물) 10만원</label>
                  <label><input type="checkbox" /> 자기부담금(대인/대물) 30만원</label>
                </div>
              </div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <div class="coverage-row salon-only-row" data-industry="salon">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">
                  보관자 배상책임(일반수탁물)
                  <span class="tooltip-trigger" tabindex="0">예</span>
                  <div class="coverage-tooltip tooltip-bottom" data-title="보관자 배상책임(일반수탁물)-미용실"></div>
                </div>
                <div class="coverage-desc" data-title="보관자 배상책임(일반수탁물)-미용실"></div>
              </div>
              <div>
                <div class="checkbox-group">
                  <label><input type="checkbox" /> 자기부담금(1사고당) 30만원</label>
                  <label><input type="checkbox" /> 자기부담금(1사고당) 100만원</label>
                </div>
              </div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <div class="coverage-row restaurant-only-row" data-industry="restaurant">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">
                  가스 배상책임
                  <span class="tooltip-trigger" tabindex="0">예</span>
                  <div class="coverage-tooltip tooltip-bottom" data-title="가스 배상책임"></div>
                </div>
                <div class="coverage-desc" data-title="가스 배상책임"></div>
              </div>
              <div></div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <div class="coverage-row restaurant-only-row" data-industry="restaurant">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">
                  음식물 배상책임
                  <span class="tooltip-trigger" tabindex="0">예</span>
                  <div class="coverage-tooltip tooltip-bottom" data-title="음식물 배상책임"></div>
                </div>
                <div class="coverage-desc" data-title="음식물 배상책임"></div>
              </div>
              <div>
                <div class="checkbox-group">
                  <label><input type="checkbox" data-subgroup="loc" /> 구내 보장</label>
                  <label><input type="checkbox" data-subgroup="loc" /> 구내+구외 보장</label>
                  <label><input type="checkbox" data-subgroup="deduct" /> 자기부담금 5만원</label>
                  <label><input type="checkbox" data-subgroup="deduct" /> 자기부담금 5만원 초과</label>
                </div>
              </div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <div class="coverage-row restaurant-only-row" data-industry="restaurant">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">
                  보관자 배상책임(일반수탁물)
                  <span class="tooltip-trigger" tabindex="0">예</span>
                  <div class="coverage-tooltip tooltip-bottom" data-title="보관자 배상책임(일반수탁물)-음식점"></div>
                </div>
                <div class="coverage-desc" data-title="보관자 배상책임(일반수탁물)-음식점"></div>
              </div>
              <div>
                <div class="checkbox-group">
                  <label><input type="checkbox" /> 자기부담금(1사고당) 30만원</label>
                  <label><input type="checkbox" /> 자기부담금(1사고당) 100만원</label>
                </div>
              </div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>
          </div>
        </section>

        <!-- 기타 손해/비용 -->
        <section class="section">
          <div class="section-header" onclick="toggleSection(this)">
            <div class="section-header-left">
              <div class="section-title">기타 손해/비용 (선택 가입(특약))</div>
              <div class="section-tag">전기위험, 점포휴업일당, 유리손해 등</div>
            </div>
            <div class="chevron">▾</div>
          </div>
          <div class="section-body">
            <div class="coverage-row" data-industry="both">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">
                  구내 폭발/파열손해
                  <span class="tooltip-trigger" tabindex="0">예</span>
                  <div class="coverage-tooltip tooltip-bottom" data-title="구내 폭발/파열손해"></div>
                </div>
                <div class="coverage-desc" data-title="구내 폭발/파열손해"></div>
              </div>
              <div></div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <div class="coverage-row restaurant-only-row" data-industry="restaurant">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">
                  급배수시설 누출손해
                  <span class="tooltip-trigger" tabindex="0">예</span>
                  <div class="coverage-tooltip tooltip-bottom" data-title="급배수시설 누출손해"></div>
                </div>
                <div class="coverage-desc" data-title="급배수시설 누출손해"></div>
              </div>
              <div></div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <div class="coverage-row" data-industry="both">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">
                  전기 위험/손해
                  <span class="tooltip-trigger" tabindex="0">예</span>
                  <div class="coverage-tooltip tooltip-bottom" data-title="전기 위험/손해"></div>
                </div>
                <div class="coverage-desc" data-title="전기 위험/손해"></div>
              </div>
              <div>
                <div class="checkbox-group">
                  <label><input type="checkbox" /> 자기부담금(1사고당) 5만원</label>
                  <label><input type="checkbox" /> 자기부담금(1사고당) 10만원</label>
                </div>
              </div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <div class="coverage-row" data-industry="both">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">
                  점포휴업일당
                  <span class="tooltip-trigger" tabindex="0">예</span>
                  <div class="coverage-tooltip tooltip-bottom" data-title="점포휴업일당"></div>
                </div>
                <div class="coverage-desc" data-title="점포휴업일당"></div>
              </div>
              <div>
                <div class="checkbox-group">
                  <label><input type="checkbox" /> 면책일 없음</label>
                  <label><input type="checkbox" /> 면책일 있음</label>
                </div>
              </div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <div class="coverage-row restaurant-only-row" data-industry="restaurant">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">
                  구내 냉동(냉장)물 손해
                  <span class="tooltip-trigger" tabindex="0">예</span>
                  <div class="coverage-tooltip tooltip-bottom" data-title="구내 냉동(냉장)물 손해"></div>
                </div>
                <div class="coverage-desc" data-title="구내 냉동(냉장)물 손해"></div>
              </div>
              <div></div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <div class="coverage-row" data-industry="both">
              <div class="prep-box">
                <div class="prep-label" data-prep-label>준비 정도</div>
                <div class="prep-badge bad" data-prep>✕</div>
              </div>
              <div>
                <div class="coverage-main">
                  유리손해
                  <span class="tooltip-trigger" tabindex="0">예</span>
                  <div class="coverage-tooltip tooltip-bottom" data-title="유리손해"></div>
                </div>
                <div class="coverage-desc" data-title="유리손해"></div>
              </div>
              <div>
                <div class="checkbox-group">
                  <label><input type="checkbox" /> 자기부담금(1사고당) 2만원</label>
                  <label><input type="checkbox" /> 자기부담금(1사고당) 20만원</label>
                </div>
              </div>
              <div>
                <div class="field-label">가입 상태 - 미가입</div>
                <label class="switch">
                  <input type="checkbox" />
                  <span class="slider"></span>
                </label>
              </div>
            </div>
          </div>
        </section>

        <div class="actions-bar-wrapper">
          <div class="actions-bar-top">
            <button id="checkCoverageBtn"
              style="padding:9px 20px;border-radius:999px;border:1px solid #1a73e8;background:#1a73e8;color:#fff;font-size:14px;font-weight:600;cursor:pointer;">
              확인
            </button>
            <div id="checkResult"></div>
          </div>

          <div class="disclaimer-box">
            <div class="disclaimer-title">중요 안내</div>
            <ul>
              <li>본 체크리스트는 (주)에이플러스에셋어드바이저의 소중한 지적 재산으로, 당사 설계사의 업무 지원을 목적으로만 제공됩니다.</li>
              <li>본 체크리스트가 회사 외부인(타 법인, 타 설계사 조직, 일반 고객 등)에게 제공되거나, 온라인 커뮤니티·SNS·메신저·클라우드 저장소 등에 게시, 업로드하는 행위는 엄격히 금지됩니다.</li>
              <li>본 체크리스트의 전부 또는 일부가 무단으로 외부에 유출되거나, 변경·편집·2차 가공되어 사용될 경우, 관련 법령 및 지식재산권에 따른 민형사상 책임이 발생할 수 있으며, 회사 내부 규정에 따른 제재가 병행될 수 있습니다.</li>
              <li>본 체크리스트는 법적 효력이 없으며 보험금 등의 지급 근거가 될 수 없습니다. 보험금 지급에 대한 세부 기준은 회사별로 상이할 수 있습니다.</li>
              <li>본 체크리스트는 특정 보험사의 약관을 기준으로 하여 작성되었으며, 세부적인 보장, 특약은 회사별로 상이할 수 있으므로, 약관을 확인하여 주시길 바랍니다.</li>
            </ul>
          </div>
        </div>
      </main>
    </div>
  </div>

<script>
  function toggleSection(headerEl) {
    const section = headerEl.parentElement;
    const body = section.querySelector(".section-body");
    const chev = section.querySelector(".chevron");
    const isHidden = body.style.display === "none";
    body.style.display = isHidden ? "block" : "none";
    chev.textContent = isHidden ? "▾" : "▸";
  }

  const industrySelect = document.getElementById("industrySelect");
  const condLocation = document.getElementById("condLocation");
  const condArea = document.getElementById("condArea");
  const fieldCondLocation = document.getElementById("fieldCondLocation");
  const fieldCondArea = document.getElementById("fieldCondArea");
  const autoFireValue = document.getElementById("autoFireValue");
  const autoFireDesc = document.getElementById("autoFireDesc");
  const resultBox = document.getElementById("checkResult");

  // ✅ 보험료 산출 요율기준 UI
  const rateBasisSelect = document.getElementById("rateBasisSelect");
  const rateBasisValue = document.getElementById("rateBasisValue");
  const rateBasisDesc = document.getElementById("rateBasisDesc");

  function setCondDisabled(disabled) {
    if (!condLocation || !condArea || !fieldCondLocation || !fieldCondArea) return;
    condLocation.disabled = disabled;
    condArea.disabled = disabled;
    if (disabled) {
      fieldCondLocation.classList.add("field-disabled");
      fieldCondArea.classList.add("field-disabled");
    } else {
      fieldCondLocation.classList.remove("field-disabled");
      fieldCondArea.classList.remove("field-disabled");
    }
  }

  function updateAutoFire() {
    if (!condLocation || !condArea || !autoFireValue || !autoFireDesc) return;
    const industry = industrySelect ? industrySelect.value : "smallshop";

    if (industry === "smallshop" || industry === "salon") {
      setCondDisabled(true);
      autoFireValue.textContent = "의무가입 미대상";
      autoFireDesc.textContent =
        industry === "smallshop"
          ? "소매점은 의무가입 화재보험 가입 대상이 아닙니다."
          : "미용실은 의무가입 화재보험 대상 업종이 아니며, 별도 재물·배상 담보로 구성합니다.";
      return;
    }

    setCondDisabled(false);

    const loc = condLocation.value;
    const area = condArea.value;

    let result = "의무가입 미대상";
    let desc = "조건1(위치), 조건2(면적)을 바탕으로 의무가입 대상 여부를 표시합니다.";

    if (loc === "1층" && area === "large") {
      result = "재난배상책임보험 의무가입대상";
      desc = "1층에 위치하고 30평 이상인 경우, 재난배상책임보험 의무가입대상에 해당할 수 있습니다.";
    }

    if (loc === "지하" && (area === "mid" || area === "large")) {
      result = "다중이용업소 화재배상책임보험 의무가입대상";
      desc = "지하에 위치하고 20평 이상인 경우, 다중이용업소 화재배상책임보험 의무가입대상에 해당할 수 있습니다.";
    }

    if (loc === "2층 이상" && area === "large") {
      result = "다중이용업소 화재배상책임보험 의무가입대상";
      desc = "2층 이상에 위치하고 30평 이상인 경우, 다중이용업소 화재배상책임보험 의무가입대상에 해당할 수 있습니다.";
    }

    autoFireValue.textContent = result;
    autoFireDesc.textContent = desc;
  }

  function updateRateBasisUI() {
    if (!rateBasisSelect || !rateBasisValue || !rateBasisDesc) return;
    const v = rateBasisSelect.value;

    if (!v) {
      rateBasisValue.textContent = "선택 필요";
      rateBasisValue.style.color = "#1d4ed8";
      rateBasisDesc.textContent =
        "보험료 산출에 사용된 업종 기준을 선택하면 설명과 가입 상태를 안내합니다.";
      return;
    }

    if (v === "operating") {
      rateBasisValue.textContent = "가입 상태 양호";
      rateBasisValue.style.color = "#16a34a";
      rateBasisDesc.textContent =
        "영위업종: 가입자가 실제로 영위하는 업종(계약자가 가입하는 재물 업종) 기준으로 가입한 상태입니다.";
      return;
    }

    if (v === "rating") {
      rateBasisValue.textContent = "보완 필요";
      rateBasisValue.style.color = "#f59e0b";
      rateBasisDesc.textContent =
        "요율업종: 가입자가 있는 건물에서 가장 화재발생 확률이 높은 업종 기준입니다. 요율업종 기준으로 가입한 경우 보완이 필요하며, 건물 내 위험한 업무를 수행하는 가게 입점 시 배서 필수입니다.";
      return;
    }
  }

  if (rateBasisSelect) {
    rateBasisSelect.addEventListener("change", updateRateBasisUI);
  }

  const singleChoiceNames = [
    "시설소유(관리)자 배상책임",
    "화재(폭발포함) 배상책임",
    "화재(폭발포함)배상책임",
    "전기위험/손해",
    "전기 위험/손해",
    "전기손해",
    "점포휴업일당",
    "유리손해",
    "보관자 배상책임(일반수탁물)",
    "이미용사 배상책임",
    "음식물 배상책임"
  ];

  function normalizeText(str) {
    return (str || "").replace(/\s+/g, "").trim();
  }

  function getRowTitleText(row) {
    const mainEl = row.querySelector(".coverage-main");
    if (!mainEl) return "";
    const clone = mainEl.cloneNode(true);
    const t1 = clone.querySelector(".tooltip-trigger");
    if (t1) t1.remove();
    const t2 = clone.querySelector(".coverage-tooltip");
    if (t2) t2.remove();
    return clone.textContent.trim();
  }

  function isSingleChoiceRow(row) {
    const title = getRowTitleText(row);
    const normalized = normalizeText(title);
    return singleChoiceNames.some(name => normalizeText(name) === normalized);
  }

  function isFoodLiabilityRow(row) {
    const title = getRowTitleText(row);
    return normalizeText(title) === normalizeText("음식물 배상책임");
  }

  function setStatusLabelText(row, isOn) {
    const label = row.querySelector(".field-label");
    if (!label) return;
    label.textContent = isOn ? "가입 상태 - 가입" : "가입 상태 - 미가입";
  }

  function showAllPreparednessUI() {
    document.querySelectorAll("[data-prep]").forEach(b => b.classList.add("show"));
    document.querySelectorAll("[data-prep-label]").forEach(l => l.classList.add("show"));
  }

  function hideAllPreparednessUI() {
    document.querySelectorAll("[data-prep]").forEach(b => b.classList.remove("show"));
    document.querySelectorAll("[data-prep-label]").forEach(l => l.classList.remove("show"));
  }

  const PERFECT_RULES = {
    "화재손해": (row) => {
      const checked = getCheckedLabelTexts(row);
      return ["건물","시설","집기","동산"].every(x => checked.has(x));
    },
    "화재 복구/수리비용": (row) => {
      const checked = getCheckedLabelTexts(row);
      return ["건물","시설"].every(x => checked.has(x));
    },
    "시설소유(관리)자 배상책임": (row) => {
      const checked = getCheckedLabelTexts(row);
      return checked.has("자기부담금 10만원");
    },
    "화재(폭발포함) 배상책임": (row) => {
      const checked = getCheckedLabelTexts(row);
      return checked.has("종업원 보장 O");
    },
    "이미용사 배상책임": (row) => {
      const checked = getCheckedLabelTexts(row);
      return checked.has("자기부담금(대인/대물) 10만원");
    },
    "보관자 배상책임(일반수탁물)": (row) => {
      const checked = getCheckedLabelTexts(row);
      return checked.has("자기부담금(1사고당) 30만원");
    },
    "음식물 배상책임": (row) => {
      const checked = getCheckedLabelTexts(row);
      return checked.has("구내+구외 보장") && checked.has("자기부담금 5만원");
    },
    "전기 위험/손해": (row) => {
      const checked = getCheckedLabelTexts(row);
      return checked.has("자기부담금(1사고당) 5만원");
    },
    "점포휴업일당": (row) => {
      const checked = getCheckedLabelTexts(row);
      return checked.has("면책일 없음");
    },
    "유리손해": (row) => {
      const checked = getCheckedLabelTexts(row);
      return checked.has("자기부담금(1사고당) 2만원");
    }
  };

  function getCheckedLabelTexts(row) {
    const set = new Set();
    const checkboxGroup = row.querySelector(".checkbox-group");
    if (!checkboxGroup) return set;

    const labels = Array.from(checkboxGroup.querySelectorAll("label"));
    labels.forEach(lab => {
      const input = lab.querySelector("input[type='checkbox']");
      if (input && input.checked) {
        const text = lab.textContent.replace(/\s+/g, " ").trim();
        set.add(text);
      }
    });
    return set;
  }

  function getSwitchOn(row) {
    const switchInput = row.querySelector(".switch input[type='checkbox']");
    return !!(switchInput && switchInput.checked);
  }

  function setPrepBadge(row, state) {
    const badge = row.querySelector("[data-prep]");
    if (!badge) return;

    badge.classList.remove("ok","warn","bad");
    row.classList.remove("row-ok","row-warn","row-bad");

    if (state === "ok") {
      badge.classList.add("ok");
      badge.textContent = "○";
      badge.setAttribute("title", "완벽");
      row.classList.add("row-ok");
    } else if (state === "warn") {
      badge.classList.add("warn");
      badge.textContent = "△";
      badge.setAttribute("title", "열화");
      row.classList.add("row-warn");
    } else {
      badge.classList.add("bad");
      badge.textContent = "✕";
      badge.setAttribute("title", "미가입");
      row.classList.add("row-bad");
    }
  }

  function updateRowPreparedness(row) {
    const title = getRowTitleText(row);
    const switchOn = getSwitchOn(row);
    const checkboxGroup = row.querySelector(".checkbox-group");
    const hasCheckbox = !!checkboxGroup;

    if (!switchOn) { setPrepBadge(row, "bad"); return; }
    if (!hasCheckbox) { setPrepBadge(row, "ok"); return; }

    const perfectFn = PERFECT_RULES[title] || null;
    if (perfectFn && perfectFn(row)) { setPrepBadge(row, "ok"); return; }

    setPrepBadge(row, "warn");
  }

  function updateAllPreparedness() {
    document.querySelectorAll(".coverage-row").forEach(r => updateRowPreparedness(r));
  }

  function bindCheckboxSwitchSync() {
    const rows = document.querySelectorAll(".coverage-row");

    rows.forEach(row => {
      const checkboxGroup = row.querySelector(".checkbox-group");
      const switchInput = row.querySelector(".switch input[type='checkbox']");
      if (!switchInput) return;

      setStatusLabelText(row, switchInput.checked);

      if (!checkboxGroup) {
        switchInput.addEventListener("change", () => {
          setStatusLabelText(row, switchInput.checked);
        });
        return;
      }

      const checkboxes = Array.from(checkboxGroup.querySelectorAll("input[type='checkbox']"));
      if (checkboxes.length === 0) return;

      const singleChoice = isSingleChoiceRow(row);
      const isFood = isFoodLiabilityRow(row);

      checkboxes.forEach(cb => {
        cb.addEventListener("change", () => {
          if (singleChoice && cb.checked) {
            if (isFood) {
              const subgroup = cb.getAttribute("data-subgroup");
              if (subgroup) {
                checkboxes.forEach(other => {
                  if (other !== cb && other.getAttribute("data-subgroup") === subgroup) {
                    other.checked = false;
                  }
                });
              }
            } else {
              checkboxes.forEach(other => { if (other !== cb) other.checked = false; });
            }
          }

          const anyChecked = checkboxes.some(c => c.checked);
          switchInput.checked = anyChecked;
          setStatusLabelText(row, anyChecked);
        });
      });

      switchInput.addEventListener("change", () => {
        const checked = switchInput.checked;
        if (!checked) { checkboxes.forEach(c => { c.checked = false; }); }
        setStatusLabelText(row, checked);
      });
    });
  }

  function isRowRequiredForCurrentIndustry(row, currentIndustry) {
    const attr = row.getAttribute("data-industry") || "both";
    if (attr === "both") return true;
    return attr === currentIndustry;
  }

  function clearRowHighlights() {
    document.querySelectorAll(".coverage-row").forEach(row => {
      row.classList.remove("row-ok","row-warn","row-bad");
    });
  }

  function bindCheckButton() {
    const btn = document.getElementById("checkCoverageBtn");
    if (!btn || !resultBox) return;

    btn.addEventListener("click", () => {
      const rows = document.querySelectorAll(".coverage-row");
      const missing = [];
      const detailMissing = [];
      const currentIndustry = industrySelect ? industrySelect.value : "smallshop";

      rows.forEach(row => {
        if (!isRowRequiredForCurrentIndustry(row, currentIndustry)) return;

        const name = getRowTitleText(row);
        const switchInput = row.querySelector(".switch input[type='checkbox']");
        const isOn = switchInput ? switchInput.checked : false;

        const checkboxGroup = row.querySelector(".checkbox-group");
        const checkboxes = checkboxGroup ? Array.from(checkboxGroup.querySelectorAll("input[type='checkbox']")) : [];
        const hasCheckbox = checkboxes.length > 0;

        if (hasCheckbox && isOn) {
          if (normalizeText(name) === normalizeText("음식물 배상책임")) {
            const locChecked = checkboxes.some(c => c.checked && c.getAttribute("data-subgroup") === "loc");
            const deductChecked = checkboxes.some(c => c.checked && c.getAttribute("data-subgroup") === "deduct");
            if (!locChecked || !deductChecked) {
              detailMissing.push(name);
              return;
            }
          } else {
            const anyChecked = checkboxes.some(c => c.checked);
            if (!anyChecked) {
              detailMissing.push(name);
              return;
            }
          }
        }

        if (!isOn) { missing.push(name); }
      });

      resultBox.style.display = "block";

      if (detailMissing.length > 0) {
        resultBox.style.borderColor = "#f97316";
        resultBox.style.background = "#fff7ed";
        resultBox.style.color = "#9a3412";
        resultBox.textContent = `${detailMissing.join(", ")} 담보의 세부사항을 선택해 주세요.`;

        hideAllPreparednessUI();
        clearRowHighlights();
        return;
      }

      if (missing.length === 0) {
        let doneMsg = "";
        if (currentIndustry === "salon") doneMsg = "미용실 기준 필수담보가 모두 가입되어 있습니다.";
        else if (currentIndustry === "smallshop") doneMsg = "소매점(문구점, 의류판매점 등) 기준 필수 담보가 모두 가입되어 있습니다.";
        else if (currentIndustry === "restaurant") doneMsg = "음식점 기준 필수 담보가 모두 가입되어 있습니다.";
        else doneMsg = "해당 업종 기준 필수 담보가 모두 가입되어 있습니다.";

        resultBox.style.borderColor = "#10b981";
        resultBox.style.background = "#ecfdf5";
        resultBox.style.color = "#065f46";
        resultBox.textContent = doneMsg;
      } else {
        resultBox.style.borderColor = "#f97316";
        resultBox.style.background = "#fff7ed";
        resultBox.style.color = "#9a3412";
        resultBox.textContent = `${missing.join(", ")} 담보의 보완이 필요합니다.`;
      }

      showAllPreparednessUI();
      updateAllPreparedness();
    });
  }

  function hideAllTooltips() {
    document.querySelectorAll(".coverage-tooltip.visible").forEach(t => {
      t.classList.remove("visible");
    });
  }

  function resetAllSelections() {
    document.querySelectorAll(".coverage-row").forEach(row => {
      row.querySelectorAll("input[type='checkbox']").forEach(i => { i.checked = false; });
      setStatusLabelText(row, false);

      const sw = row.querySelector(".switch input[type='checkbox']");
      if (sw) sw.checked = false;

      setPrepBadge(row, "bad");
      row.classList.remove("row-ok","row-warn","row-bad");
    });

    if (resultBox) {
      resultBox.style.display = "none";
      resultBox.textContent = "";
    }

    hideAllPreparednessUI();
    hideAllTooltips();
  }

  function updateSalonRows() {
    const industry = industrySelect ? industrySelect.value : "smallshop";
    const salonRows = document.querySelectorAll(".salon-only-row");
    salonRows.forEach(row => {
      const visible = industry === "salon";
      row.style.display = visible ? "grid" : "none";

      if (!visible) {
        row.querySelectorAll("input[type='checkbox']").forEach(i => { i.checked = false; });
        const switchInput = row.querySelector(".switch input[type='checkbox']");
        if (switchInput) switchInput.checked = false;
        setStatusLabelText(row, false);
        setPrepBadge(row, "bad");
        row.classList.remove("row-ok","row-warn","row-bad");
      }
    });
  }

  function updateRestaurantRows() {
    const industry = industrySelect ? industrySelect.value : "smallshop";
    const restaurantRows = document.querySelectorAll(".restaurant-only-row");
    restaurantRows.forEach(row => {
      const visible = industry === "restaurant";
      row.style.display = visible ? "grid" : "none";

      if (!visible) {
        row.querySelectorAll("input[type='checkbox']").forEach(i => { i.checked = false; });
        const switchInput = row.querySelector(".switch input[type='checkbox']");
        if (switchInput) switchInput.checked = false;
        setStatusLabelText(row, false);
        setPrepBadge(row, "bad");
        row.classList.remove("row-ok","row-warn","row-bad");
      }
    });
  }

  function adjustTooltipDirection(tooltip) {
    tooltip.classList.remove("tooltip-top");
    tooltip.classList.add("tooltip-bottom");

    const rect = tooltip.getBoundingClientRect();
    const viewportHeight = window.innerHeight || document.documentElement.clientHeight;

    if (rect.bottom > viewportHeight - 8) {
      tooltip.classList.remove("tooltip-bottom");
      tooltip.classList.add("tooltip-top");
    } else {
      tooltip.classList.remove("tooltip-top");
      tooltip.classList.add("tooltip-bottom");
    }
  }

  function bindTooltips() {
    const triggers = document.querySelectorAll(".tooltip-trigger");

    triggers.forEach(trigger => {
      let hideTimeout = null;
      const tooltip = trigger.nextElementSibling;

      if (!tooltip || !tooltip.classList.contains("coverage-tooltip")) return;

      const show = () => {
        if (hideTimeout) { clearTimeout(hideTimeout); hideTimeout = null; }
        hideAllTooltips();
        tooltip.classList.add("visible");
        adjustTooltipDirection(tooltip);
      };

      const scheduleHide = () => {
        hideTimeout = setTimeout(() => { tooltip.classList.remove("visible"); }, 150);
      };

      trigger.addEventListener("mouseenter", show);
      trigger.addEventListener("focus", show);
      trigger.addEventListener("mouseleave", scheduleHide);
      trigger.addEventListener("blur", scheduleHide);

      tooltip.addEventListener("mouseenter", () => {
        if (hideTimeout) { clearTimeout(hideTimeout); hideTimeout = null; }
      });
      tooltip.addEventListener("mouseleave", scheduleHide);
    });

    document.addEventListener("click", e => {
      if (e.target.closest(".coverage-main")) return;
      hideAllTooltips();
    });

    document.addEventListener("scroll", hideAllTooltips, true);
  }

  const COVERAGE_INFO = {
    "화재손해": {
      desc: "화재나 폭발로 건물·시설·집기·동산 등이 직접 입은 손해를 보장합니다.",
      examples: { smallshop: null, salon: null, restaurant: null }
    },
    "화재 복구/수리비용": {
      desc: "화재로 손상된 건물·시설 등을 복구하거나 수리하는 데 드는 추가 비용을 보장합니다.",
      examples: { smallshop: null, salon: null, restaurant: null }
    },
    "시설소유(관리)자 배상책임": {
      desc: "점포 시설의 하자·관리 소홀로 고객이나 제3자에게 발생한 인적·물적 손해를 보장합니다.",
      examples: {
        smallshop: "예) 의류매장 진열대 모서리에 고객이 부딪혀 넘어져 다친 경우",
        salon: "예) 미용실 바닥 물기에 고객이 미끄러져 넘어져 부상을 입은 경우",
        restaurant: "예) 음식점 입구 턱에 걸려 손님이 넘어져 상해를 입은 경우"
      }
    },
    "화재(폭발포함) 배상책임": {
      desc: "점포에서 발생한 화재·폭발로 이웃 상가나 주민에게 끼친 손해에 대한 배상책임을 보장합니다.",
      examples: {
        smallshop: "예) 문구점에서 발생한 화재가 위층 사무실로 번져 집기를 태운 경우",
        salon: "예) 미용실 전기기구에서 불이 나 옆 점포 간판과 집기가 손상된 경우",
        restaurant: "예) 음식점 주방 화재가 인접 상가로 번져 집기와 비품을 태운 경우"
      }
    },
    "이미용사 배상책임": {
      desc: "시술 중 화학약품·기구 사용 등으로 고객에게 발생한 상해·피부·모발 손상을 보장합니다.",
      examples: { smallshop: null, salon: "예) 염색약 사용 중 고객 두피에 화학 화상이 발생하거나 파마 시술로 모발이 심하게 손상된 경우", restaurant: null }
    },
    "보관자 배상책임(일반수탁물)-미용실": {
      desc: "미용실에서 고객이 맡긴 외투·가방 등 수탁물이 오염·훼손되었을 때의 배상책임을 보장합니다.",
      examples: { smallshop: null, salon: "예) 미용실에 보관 중이던 고객 외투에 염색약이 튀어 오염되거나 훼손된 경우", restaurant: null }
    },
    "가스 배상책임": {
      desc: "조리용 가스 설비의 누출·폭발 등으로 제3자에게 발생한 인적·물적 손해에 대한 배상책임을 보장합니다.",
      examples: { smallshop: null, salon: null, restaurant: "예) 조리용 가스 배관 누출로 작은 폭발이 발생해 인접 점포 유리와 집기가 파손된 경우" }
    },
    "음식물 배상책임": {
      desc: "제공한 음식물의 오염·부패, 조리과정의 과실 등으로 고객에게 인적·물적 손해가 발생했을 때의 배상책임을 보장합니다.",
      examples: { smallshop: null, salon: null, restaurant: "예) 상했거나 조리 미흡한 음식의 제공으로 손님이 식중독에 걸려 치료비와 위자료를 청구한 경우, 종업원이 실수로 음식물을 쏟아 고객의 신체, 재물에 손해를 입혔을 경우" }
    },
    "보관자 배상책임(일반수탁물)-음식점": {
      desc: "음식점에서 고객이 맡긴 외투·가방 등 수탁물이 오염·훼손되었을 때의 배상책임을 보장합니다.",
      examples: { smallshop: null, salon: null, restaurant: "예) 음식점에서 손님이 배터리 충전을 위해 맡겨둔 핸드폰을 직원이 실수로 떨어뜨려 파손된 경우" }
    },
    "구내 폭발/파열손해": {
      desc: "보장구역 안에서 보일러·가스설비 등의 폭발·파열로 생긴 물적 손해를 보장합니다.",
      examples: {
        smallshop: "예) 소매점 내부 보일러가 파열되어 천장과 벽, 진열장이 동시에 파손된 경우",
        salon: "예) 미용실 온수기 폭발로 천장과 벽, 인근 설비가 파손된 경우",
        restaurant: "예) 음식점 보일러 폭발로 주방 천장과 벽, 조리 설비가 한꺼번에 파손된 경우"
      }
    },
    "급배수시설 누출손해": {
      desc: "급수·배수 배관 누수로 인한 바닥·벽·집기 등의 물적 손해를 보장합니다.",
      examples: { smallshop: null, salon: null, restaurant: "예) 주방 싱크대 아래 배관이 새어 바닥 마루와 집기가 젖어 망가진 경우" }
    },
    "전기 위험/손해": {
      desc: "누전·합선·과전류 등 전기적 사고로 기계·전기설비가 손상된 경우를 보장합니다.",
      examples: {
        smallshop: "예) 에어컨 누전으로 내부 전기부품이 타 손상된 경우",
        salon: "예) 미용실 드라이기 합선으로 콘센트 주변이 타고 세척기 내부 전기부품이 손상된 경우",
        restaurant: "예) 음식점 냉장·냉동고 전기 합선으로 컴프레서가 고장 나 교체가 필요한 경우"
      }
    },
    "점포휴업일당": {
      desc: "화재, 벼락, 파열 또는 폭발, 항공기의 추락 또는 물체 떨어짐, 차량과의 충돌 또는 접촉, 붕괴, 침강 및 사태, 풍수재 등 사고로 인한 휴업 기간 동안 약정된 일당 금액을 지급하는 형태의 휴업손해 담보입니다.",
      examples: {
        smallshop: "예) 문구점 화재 복구 공사 기간 동안 하루당 약정된 휴업일당을 지급받는 경우",
        salon: "예) 미용실 화재 복구 공사로 일정 기간 문을 닫는 동안 하루당 약정된 휴업일당을 지급받는 경우",
        restaurant: "예) 음식점 내부 수리로 영업을 중단한 기간 동안 하루 기준의 휴업일당을 지급받는 경우"
      }
    },
    "구내 냉동(냉장)물 손해": {
      desc: "냉동·냉장 설비 고장 등으로 보관 중인 식재료가 부패하거나 손상된 경우의 손해를 보장합니다.",
      examples: { smallshop: null, salon: null, restaurant: "예) 냉동창고 고장으로 육류·해산물 등 식재료가 한꺼번에 상해 폐기해야 하는 경우" }
    },
    "유리손해": {
      desc: "점포 쇼윈도·유리문 등이 파손되었을 때 교체·수리 비용을 보장합니다.",
      examples: {
        smallshop: "예) 쇼윈도 유리가 차량 접촉으로 깨져 교체 비용이 발생한 경우",
        salon: "예) 미용실 출입문 유리가 고객의 부주의로 깨져 새 유리로 교체한 경우",
        restaurant: "예) 음식점 전면 유리창이 파손되어 교체 비용이 발생한 경우"
      }
    }
  };

  function fillDescriptionsAndExamples() {
    const industry = industrySelect ? industrySelect.value : "smallshop";

    document.querySelectorAll(".coverage-desc[data-title]").forEach(descEl => {
      const titleKey = descEl.getAttribute("data-title");
      const info = COVERAGE_INFO[titleKey];
      descEl.textContent = (info && info.desc) ? info.desc : "";
    });

    document.querySelectorAll(".coverage-tooltip[data-title]").forEach(tooltip => {
      const titleKey = tooltip.getAttribute("data-title");
      const info = COVERAGE_INFO[titleKey];
      if (!info || !info.examples) { tooltip.textContent = ""; return; }

      const example =
        industry === "smallshop" ? info.examples.smallshop :
        industry === "salon" ? info.examples.salon :
        info.examples.restaurant;

      tooltip.textContent = example || "";
    });
  }

  function initAll() {
    updateAutoFire();
    updateSalonRows();
    updateRestaurantRows();
    bindCheckboxSwitchSync();
    bindCheckButton();
    bindTooltips();
    fillDescriptionsAndExamples();
    hideAllPreparednessUI();

    // ✅ 추가
    updateRateBasisUI();
  }

  if (industrySelect) {
    industrySelect.addEventListener("change", () => {
      updateAutoFire();
      updateSalonRows();
      updateRestaurantRows();
      resetAllSelections();
      fillDescriptionsAndExamples();
      updateRateBasisUI(); // 업종 변경 시에도 안내 박스 유지
    });
  }
  if (condLocation) condLocation.addEventListener("change", updateAutoFire);
  if (condArea) condArea.addEventListener("change", updateAutoFire);

  document.addEventListener("DOMContentLoaded", () => { initAll(); });
  initAll();
</script>
</body>
</html>
